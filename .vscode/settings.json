// https://code.visualstudio.com/docs/getstarted/settings#_default-settings
// https://devblogs.microsoft.com/powershell/psscriptanalyzer-pssa-1-19-0-has-been-released
// NOTE: We explicity define all extension settings in alphabetical order as it is listed
// in Extensions -> Feature Contributions to ensure that change to defaults doesn't affect us
{
	// VSCode: workspace files
	"files.encoding": "utf8",
	"files.autoSave": "afterDelay",
	"files.autoSaveDelay": 500,
	"files.eol": "\r\n",
	"files.trimTrailingWhitespace": true,
	"files.trimFinalNewlines": true,
	"files.insertFinalNewline": true,
	"files.associations": {
		"*config": "ssh_config",
		"*.msc": "xml",
		// Test module for Config\ProjectSettings.psd1
		"*PssaTest.Module*": "PssaTest"
	},
	// Test module for Config\ProjectSettings.psd1 must not be formatted
	"[PssaTest]": {
		"editor.formatOnSave": false,
		"editor.formatOnPaste": false,
		"editor.trimAutoWhitespace": false,
		"editor.formatOnType": false
	},
	// Markdown formatter is "markdownlint" extension
	"[markdown]": {
		"editor.wordWrap": "off",
		"editor.detectIndentation": true,
		"editor.insertSpaces": true,
		"editor.formatOnSave": false,
		"editor.formatOnPaste": true
	},
	// PowerShell extension is default formatter
	"[powershell]": {
		"editor.defaultFormatter": "ms-vscode.powershell"
	},
	// VSCode: editor
	"editor.quickSuggestions": {
		"other": true,
		"comments": true,
		"strings": true
	},
	"editor.rulers": [
		{
			"column": 100,
			"color": "#4063ff"
		},
		{
			"column": 120,
			"color": "#ff0000"
		},
	],
	"editor.formatOnPaste": true,
	"editor.formatOnSave": true,
	"editor.formatOnType": true,
	"editor.autoIndent": "full",
	"editor.wordWrap": "off",
	"editor.trimAutoWhitespace": true,
	"editor.insertSpaces": false,
	"editor.scrollBeyondLastLine": true,
	"editor.scrollbar.horizontalScrollbarSize": 20,
	"editor.minimap.showSlider": "always",
	"editor.snippetSuggestions": "bottom",
	"editor.comments.ignoreEmptyLines": false,
	// override the colors of the default log items (log files):
	// log.constant
	// log.date
	// log.verbose
	// log.debug
	// log.error
	// log.exception
	// log.info
	// log.string
	// log.exceptiontype
	// log.warning
	// NOTE: This can also be handled with "logFileHighlighter.customPatterns"
	// see also: https://macromates.com/manual/en/language_grammars
	// https://code.visualstudio.com/api/language-extensions/syntax-highlight-guide
	"editor.tokenColorCustomizations": {
		"textMateRules": [
			{
				"scope": "log.date",
				"settings": {
					"foreground": "#b3aeae",
					// "fontStyle": "bold"
				}
			}
		]
	},
	// NOTE: Work around ugly syntax highlighting:
	// https://github.com/PowerShell/vscode-powershell/issues/3221
	"editor.semanticHighlighting.enabled": false,
	"editor.codeActionsOnSave": {
		// TODO: need to verify if result is desired
		"source.fixAll.markdownlint": false
	},
	// PSUseConsistentIndentation
	"editor.detectIndentation": false,
	"editor.tabSize": 4,
	// VSCode: workbench
	"workbench.colorCustomizations": {
		// TODO: Isn't this duplicate of "editor.rulers"
		"editorRuler.foreground": "#4063ff",
		"tab.activeBorder": "#ff0000"
	},
	"workbench.editor.defaultBinaryEditor": "",
	"workbench.editor.enablePreviewFromCodeNavigation": true,
	"workbench.editor.enablePreviewFromQuickOpen": false,
	"workbench.editor.highlightModifiedTabs": true,
	// VSCode: diffeditor
	"diffEditor.ignoreTrimWhitespace": false,
	// VSCode: Terminal
	// NOTE: This hight number due to Test\PSScriptAnalyzer.ps1
	"terminal.integrated.scrollback": 40000,
	// Extension: AutoScroll
	"autoscroll.keepLastLineInCenter": true,
	// Extension: Bookmarks
	"bookmarks.saveBookmarksInProject": true,
	"bookmarks.sideBar.expanded": true,
	// Extension: Code Spell Checker
	// TODO: This config isn't recognized in cspell.json
	// File types for language ID's are defined in cspell.json
	"cSpell.enableFiletypes": [
		"ignore",
		"jsonc",
		"json",
		"properties", // gitattributes
		"log",
		// NOTE: If "csv (semicolon)" is flagged it's false falg see:
		// https://github.com/streetsidesoftware/vscode-spell-checker/discussions/2346
		"csv (semicolon)", // exported rules
		"ini" // mTail configuration
	],
	// Extension: Filter Line
	// CAUTION: Needs to be set in user settings
	"filter-line.historySize": 20,
	// Extension: Fix JSON
	"fixJson.indentationSpaces": null,
	// Extension: Hightlight Bad Chars
	"highlight-bad-chars.asciiOnly": true,
	"highlight-bad-chars.additionalUnicodeChars": [
		// https://www.vertex42.com/ExcelTips/unicode-symbols.html
	],
	"highlight-bad-chars.badCharDecorationStyle": {
		"cursor": "square",
		"backgroundColor": "rgba(255,0,0,0.3)",
		"borderWidth": "1px",
		"borderStyle": "solid",
		"borderColor": "rgba(255,0,0,0.6)"
	},
	// Extension: JSON
	"JSON-zain.json.autorefresh": true,
	// Extension: Log File Hightlighter
	// Custom highlighting patterns
	// VS colors
	// string D69D85
	// comment 57A64A
	// member func DCDCAA
	// variables C8C8C8
	// user types 1BC9B0
	// enums B8D7A3
	// functions FF8000
	"logFileHighlighter.customPatterns": [
		{
			// Action drop fc3737
			"pattern": "DROP",
			"background": "#990404",
			"foreground": "#ccc3c3"
		},
		{
			// Action allow 066933
			"pattern": "ALLOW",
			"background": "#076338",
			"foreground": "#ccc3c3"
		},
		{
			// TCP protocol
			"pattern": "TCP",
			"foreground": "#57A64A"
		},
		{
			// UDP protocol c4d112 f1a043
			"pattern": "UDP",
			"foreground": "#f1a043"
		},
		{
			// ICMP protocol
			"pattern": "ICMP",
			"foreground": "#d5e40e"
		},
		{
			// Other protocols d37811
			"pattern": "(?<=(DROP|ACCEPT)\\s)\\d{1,3}",
			"foreground": "#b3aeae"
		},
		{
			// IPv4 address 5ca7ee
			"pattern": "([0-9]{1,3}\\.){3}[0-9]{1,3}",
			"foreground": "#5ca7ee"
		},
		{
			// IPv6 address 7dbffd
			"pattern": "(?<!-\\d+)\\s([a-f0-9:]+:)+[a-f0-9]+",
			"foreground": "#1cdfce"
		},
		{
			// Port numbers 1cdfce f17e7e
			"pattern": "\\s[0-9]{1,5}\\s[0-9]{1,5}\\s(?=((\\d+|-)\\s){8})",
			"foreground": "#f17e7e"
		},
		{
			// Details, the rest of line
			"pattern": "\\s((\\d+|-)\\s){8}(?=SEND|RECEIVE)",
			"foreground": "#b3aeae"
		},
		{
			// Direction inbound
			"pattern": "(?<=(\\d|-)\\s)RECEIVE",
			"foreground": "#fc3737"
		},
		{
			// Direction outbound
			"pattern": "(?<=(\\d|-)\\s)SEND",
			"foreground": "#57A64A"
		},
		{
			// Time
			"pattern": "(?<=(-\\d+)\\s)\\d+:\\d+:\\d+",
			"foreground": "#B8D7A3"
		}
	],
	// Extension: Markdown All in One
	"markdown.extension.orderedList.autoRenumber": true,
	// Extension markdownlint
	"markdownlint.run": "onType",
	// Extension: PowerShell
	"powershell.startAutomatically": true,
	"powershell.enableProfileLoading": true,
	"powershell.enableReferencesCodeLens": true,
	"powershell.analyzeOpenDocumentsOnly": false,
	"powershell.promptToUpdatePowerShell": true,
	"powershell.buttons.showRunButtons": true,
	"powershell.buttons.showPanelMovementButtons": false,
	"powershell.debugging.createTemporaryIntegratedConsole": false,
	"powershell.developer.editorServicesLogLevel": "Warning",
	"powershell.developer.editorServicesWaitForDebugger": false,
	"powershell.developer.featureFlags": [],
	"powershell.developer.waitForSessionFileTimeoutSeconds": 240,
	//"powershell.developer.bundledModulesPath": "set custom modules path",
	"powershell.sideBar.CommandExplorerVisibility": true,
	"powershell.sideBar.CommandExplorerExcludeFilter": [
		"ThreadJob",
		"PSReadLine",
		"BitsTransfer",
		"PrintManagement",
		"Storage",
		"PSDesiredStateConfiguration",
		"EventTracingManagement",
		"Microsoft.PowerShell.Host",
		"MsDtc",
		"SmbShare",
		"ConfigCI",
		"HgsServer",
		"HgsKeyProtection",
		"iSCSI",
		"KDS",
		"BranchCache",
		"MMAgent",
		"Wdac",
		"PnpDevice",
		"WSSCmdlets",
		"Az.Network",
		"PCSVDevice",
		"HgsDiagnostics",
		"SmbWitness",
		"DISM",
		"TroubleshootingPack",
		"DirectAccessClientComponents",
		// Possibly wanted (network and security)
		"VpnClient",
		"TrustedPlatformModule",
		"SecureBoot",
		"BitLocker",
		"TLS",
		"NetQoS",
		"Hyper-V",
		"WindowsUpdate"
	],
	// pester
	"powershell.pester.useLegacyCodeLens": false,
	"powershell.pester.outputVerbosity": "FromPreference",
	"powershell.pester.debugOutputVerbosity": "Minimal",
	// integratedConsole
	"powershell.integratedConsole.showOnStartup": false,
	"powershell.integratedConsole.forceClearScrollbackBuffer": true,
	"powershell.integratedConsole.startInBackground": false,
	"powershell.integratedConsole.focusConsoleOnExecute": true,
	"powershell.integratedConsole.useLegacyReadLine": false,
	"powershell.integratedConsole.suppressStartupBanner": true,
	// code folding
	"powershell.codeFolding.enable": true,
	"powershell.codeFolding.showLastLine": true,
	// PowerShell: script analysis
	"powershell.scriptAnalysis.enable": true,
	"powershell.scriptAnalysis.settingsPath": "Config\\PSScriptAnalyzerSettings.psd1",
	// PowerShell: code formatting
	"powershell.codeFormatting.preset": "Allman",
	// PSAvoidUsingCmdletAliases
	"powershell.codeFormatting.autoCorrectAliases": false,
	// PSAvoidSemicolonsAsLineTerminators
	"powershell.codeFormatting.avoidSemicolonsAsLineTerminators": true,
	// PSAvoidUsingDoubleQuotesForConstantString
	"powershell.codeFormatting.useConstantStrings": false,
	// PSPlaceOpenBrace
	"powershell.codeFormatting.openBraceOnSameLine": false,
	"powershell.codeFormatting.newLineAfterOpenBrace": true,
	"powershell.codeFormatting.ignoreOneLineBlock": true,
	// PSPlaceCloseBrace
	"powershell.codeFormatting.newLineAfterCloseBrace": true,
	// PSUseConsistentWhitespace
	"powershell.codeFormatting.whitespaceInsideBrace": true,
	"powershell.codeFormatting.whitespaceBeforeOpenBrace": true,
	"powershell.codeFormatting.whitespaceBeforeOpenParen": true,
	"powershell.codeFormatting.whitespaceAroundOperator": true,
	"powershell.codeFormatting.addWhitespaceAroundPipe": true,
	"powershell.codeFormatting.whitespaceAfterSeparator": true,
	"powershell.codeFormatting.trimWhitespaceAroundPipe": true,
	"powershell.codeFormatting.whitespaceBetweenParameters": true,
	// PSUseConsistentIndentation
	"powershell.codeFormatting.pipelineIndentationStyle": "NoIndentation",
	// PSAlignAssignmentStatement
	"powershell.codeFormatting.alignPropertyValuePairs": false,
	// PSUseCorrectCasing
	"powershell.codeFormatting.useCorrectCasing": true,
	// PSProvideCommentHelp
	"powershell.helpCompletion": "BlockComment",
	// Extension: Rainbow CSV
	"rainbow_csv.enable_auto_csv_lint": true,
	"rainbow_csv.csv_lint_detect_trailing_spaces": true,
	// Extension: Sort JSON objects
	"sortJSON.contextMenu": {
		"sortJSON": false,
		"sortJSONAlphaNum": false,
		"sortJSONAlphaNumReverse": false,
		"sortJSONKeyLength": false,
		"sortJSONKeyLengthReverse": false,
		"sortJSONReverse": false,
		"sortJSONType": false,
		"sortJSONTypeReverse": false,
		"sortJSONValues": false,
		"sortJSONValuesReverse": false
	},
	// Extension: Todo Tree
	// NOTE: For markdown settings https://github.com/Gruntfuggly/todo-tree#markdown-support
	// NOTE: The default regex will be updated to reflect these changes at some point in the future.
	"todo-tree.regex.regex": "(//|#|<!--|;|/\\*|^|^\\s*(-|\\d+.))\\s*($TAGS)",
	"todo-tree.general.tags": [
		"HACK",
		"TODO",
		"NOTE",
		"BUG",
		"MSDN",
		"CAUTION",
		"ISSUE",
		"[ ]",
		"[x]",
		"INFO",
		"FIX"
	],
	"todo-tree.highlights.customHighlight": {
		// Hard to resolve
		"HACK": {
			// used to set a different icon in the tree view
			// consider: info, bookmark, markdown, alert, bug, question, mark-github,
			// issue-opened, check-circle, checklist, report, beaker
			// icons and names: https://primer.style/octicons
			"icon": "zap",
			// used to control how much is highlighted in the editor. Valid values are:
			// tag - highlights just the tag
			// text - highlights the tag and any text after the tag
			// tag-and-comment - highlights the comment characters (or the start of the match) and the tag
			// text-and-comment - highlights the comment characters (or the start of the match), the tag and the text after the tag
			// line - highlights the entire line containing the tag
			// whole-line - highlights the entire line containing the tag to the full width of the editor
			"type": "tag",
			// used to set the foreground colour of the highlight in the editor and the marker in the ruler
			// Foreground and background can be: "red", "green", "blue", "yellow", "magenta", "cyan", "grey", "white" or "black"
			// see https://www.w3schools.com/colors/default.asp
			"foreground": "#ffffff",
			// used to set the background colour of the highlight in the editor.
			"background": "#ff0000",
			// 100% will produce an opaque background
			"opacity": 70,
			// used to set the colour of the icon in the tree
			"iconColour": "#ff0000",
			// used to hide tags from the tree, but still highlight in files
			// "hideFromTree ": false,
			// set to true to show the icon in the editor gutter
			// "gutterIcon": true,
			// prevents the tag from being included in the status bar counts
			// "hideFromStatusBar": false
		},
		// Needs additional work
		"TODO": {
			"icon": "tools",
			"type": "tag",
			"foreground": "#000000",
			"background": "#ffffff",
			"iconColour": "#228B22", // ForestGreen
			"opacity": 90
		},
		// Important comment(s)
		"NOTE": {
			"icon": "info",
			"type": "tag",
			"foreground": "#ffffff",
			"background": "#2ec920", // Custom green
			"iconColour": "#ffffff",
			"opacity": 40,
			// TODO: setting not working
			"hideFromTree ": true
		},
		// Known bug, need to fix
		"BUG": {
			"icon": "bug",
			"type": "tag",
			"foreground": "#ffffff", // White
			"background": "#ff0000", // Red
			"iconColour": "#ff0000", // Red
			"opacity": 70
		},
		// Citing Microsoft documentation
		"MSDN": {
			"icon": "beaker",
			"type": "tag",
			"foreground": "#fff8dc", // Cornsilk
			"background": "#008b8b", // DarkCyan
			"iconColour": "#00bfff", // DeepSkyBlue
			"opacity": 70
		},
		// Warning to developer
		"CAUTION": {
			"icon": "alert",
			"type": "tag",
			"foreground": "#ffffff",
			"background": "#FDA50F", // Fire
			"iconColour": "#FFF200", // Bright Yellow
			"opacity": 70
		},
		// Citing GitHub issue
		"ISSUE": {
			"icon": "mark-github",
			"type": "tag",
			"foreground": "#fff8dc", // Cornsilk
			"background": "#0d3dcf", // Custom blue
			"iconColour": "#c0c0c0", // Silver
			"opacity": 90
		},
		// Unchecked box
		"[ ]": {
			"icon": "markdown",
			"type": "tag",
			"foreground": "#000000",
			"background": "#ffffff",
			"iconColour": "#ffffff",
			"opacity": 90
		},
		// Checked box
		"[x]": {
			"icon": "markdown",
			"type": "tag",
			"foreground": "#ffffff",
			"background": "#2ec920", // Custom green
			"iconColour": "#2ec920", // Custom green
			"opacity": 40,
		}
	},
	"todo-tree.general.tagGroups": {
		"NOTE": [
			"NOTE",
			"INFO"
		],
		"BUG": [
			"BUG",
			"FIX"
		]
	},
	// Extension: Trailing Spaces
	// CAUTION: Enabling this causes issues writing code according to identations rules
	"trailing-spaces.trimOnSave": false,
	//Extension: XML
	// NOTE: Configure telemetry if you wish in user settings
	// BUG: https://github.com/redhat-developer/vscode-yaml/issues/564
	// "redhat.telemetry.enabled": false,
	// CAUTION: For XML extension to work it must be allowed internet access, there is rule in Rules\VSCode.ps1
	"xml.server.preferBinary": true,
	"xml.server.silenceExtensionWarning": false,
	// NOTE: Configure if desired in user settings
	// "xml.server.binary.trustedHashes": [],
	"xml.trace.server": "off",
	"xml.logs.client": false,
	"xml.downloadExternalResources.enabled": true,
	"xml.fileAssociations": [
		{
			"systemId": "https://raw.githubusercontent.com/PowerShell/PowerShell/master/src/Schemas/Format.xsd",
			"pattern": "**/*.Format.ps1xml"
		},
		{
			"systemId": "https://raw.githubusercontent.com/PowerShell/PowerShell/master/src/Schemas/Types.xsd",
			"pattern": "**/*.Types.ps1xml"
		}
	],
	"xml.foldings.includeClosingTagInFold": false,
	"xml.format.enabled": true,
	"xml.format.emptyElements": "expand",
	"xml.format.enforceQuoteStyle": "preferred",
	"xml.format.experimental": false,
	"xml.format.grammarAwareFormatting": true,
	"xml.format.joinCDATALines": false,
	"xml.format.joinCommentLines": false,
	"xml.format.joinContentLines": true,
	"xml.format.maxLineWidth": 120,
	"xml.format.preserveAttributeLineBreaks": true,
	"xml.format.preserveEmptyContent": false,
	"xml.format.preservedNewlines": 2,
	"xml.format.preserveSpace":[],
	"xml.format.spaceBeforeEmptyCloseTag": true,
	"xml.format.xsiSchemaLocationSplit": "onPair",
	"xml.format.splitAttributes": false,
	"xml.format.splitAttributesIndentSize": 2,
	"xml.format.closingBracketNewLine": false,
	"xml.completion.autoCloseTags": true,
	"xml.completion.autoCloseRemovesContent": true,
	"xml.codeLens.enabled": true,
	"xml.preferences.quoteStyle": "double",
	"xml.preferences.showSchemaDocumentationType": "all",
	"xml.validation.enabled": true,
	"xml.validation.namespaces.enabled": "always",
	"xml.validation.schema.enabled": "always",
	"xml.validation.disallowDocTypeDecl": false,
	"xml.validation.resolveExternalEntities": false,
	"xml.validation.noGrammar": "hint",
	"xml.symbols.enabled": true,
	"xml.validation.filters": [],
	"xml.symbols.excluded": [],
	"xml.symbols.maxItemsComputed": 5000,
	"xml.symbols.showReferencedGrammars": true,
	"xml.symbols.filters": [],
	"xml.extension.jars": [],
	// Extension: YAML
	"yaml.yamlVersion": "1.2",
	"yaml.trace.server": "off",
	"yaml.format.enable": true,
	"yaml.format.singleQuote": false,
	"yaml.format.bracketSpacing": true,
	"yaml.format.proseWrap": "preserve",
	"yaml.format.printWidth": 120,
	"yaml.validate": true,
	"yaml.hover": true,
	"yaml.completion": true,
	"yaml.customTags": [],
	"yaml.schemaStore.enable": true,
	"yaml.schemaStore.url": "https://www.schemastore.org/api/json/catalog.json",
	"yaml.disableAdditionalProperties": false,
	"yaml.disableDefaultProperties": false,
	"yaml.maxItemsComputed": 5000,
	"yaml.suggest.parentSkeletonSelectedFirst": false,
	"yaml.style.flowMapping": "allow",
	"yaml.style.flowSequence": "allow",
}
